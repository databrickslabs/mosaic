<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Raster Format Readers &mdash; Mosaic</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
      <link rel="stylesheet" href="../_static/fonts.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/tabs.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Geometry constructors" href="geometry-constructors.html" />
    <link rel="prev" title="Vector Format Readers" href="vector-format-readers.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Mosaic
              <img src="../_static/mosaic_logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="api.html">API Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="vector-format-readers.html">Vector Format Readers</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Raster Format Readers</a></li>
<li class="toctree-l2"><a class="reference internal" href="geometry-constructors.html">Geometry constructors</a></li>
<li class="toctree-l2"><a class="reference internal" href="geometry-accessors.html">Geometry accessors</a></li>
<li class="toctree-l2"><a class="reference internal" href="spatial-functions.html">Spatial functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="spatial-indexing.html">Spatial grid indexing</a></li>
<li class="toctree-l2"><a class="reference internal" href="spatial-predicates.html">Spatial predicates</a></li>
<li class="toctree-l2"><a class="reference internal" href="spatial-aggregations.html">Spatial aggregation functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="raster-functions.html">Raster functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="rasterio-gdal-udfs.html">Rasterio + GDAL UDFs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage/usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../models/models.html">Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../literature/videos.html">Mosaic Videos and Talks</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Mosaic</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="api.html">API Documentation</a></li>
      <li class="breadcrumb-item active">Raster Format Readers</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/api/raster-format-readers.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="raster-format-readers">
<h1>Raster Format Readers<a class="headerlink" href="#raster-format-readers" title="Permalink to this heading"></a></h1>
<section id="intro">
<h2>Intro<a class="headerlink" href="#intro" title="Permalink to this heading"></a></h2>
<p>Mosaic provides spark readers for raster files supported by GDAL OGR drivers.
Only the drivers that are built by default are supported.
Here are some common useful file formats:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://gdal.org/drivers/raster/gtiff.html">GTiff</a> (GeoTiff) using .tif file extension</p></li>
<li><p><a class="reference external" href="https://gdal.org/drivers/raster/cog.html">COG</a> (Cloud Optimized GeoTiff) using .tif file extension</p></li>
<li><p><a class="reference external" href="https://gdal.org/drivers/raster/hdf4.html">HDF4</a> using .hdf file extension</p></li>
<li><p><a class="reference external" href="https://gdal.org/drivers/raster/hdf5.html">HDF5</a> using .h5 file extension</p></li>
<li><p><a class="reference external" href="https://gdal.org/drivers/raster/netcdf.html">NetCDF</a> using .nc file extension</p></li>
<li><p><a class="reference external" href="https://gdal.org/drivers/raster/jp2ecw.html">JP2ECW</a> using .jp2 file extension</p></li>
<li><p><a class="reference external" href="https://gdal.org/drivers/raster/jp2kak.html">JP2KAK</a> using .jp2 file extension</p></li>
<li><p><a class="reference external" href="https://gdal.org/drivers/raster/jp2openjpeg.html">JP2OpenJPEG</a> using .jp2 file extension</p></li>
<li><p><a class="reference external" href="https://gdal.org/drivers/raster/pdf.html">PDF</a> using .pdf file extension</p></li>
<li><p><a class="reference external" href="https://gdal.org/drivers/raster/png.html">PNG</a> using .png file extension</p></li>
<li><p><a class="reference external" href="https://gdal.org/drivers/raster/vrt.html">VRT</a> using .vrt file extension</p></li>
<li><p><a class="reference external" href="https://gdal.org/drivers/raster/xpm.html">XPM</a> using .xpm file extension</p></li>
<li><p><a class="reference external" href="https://gdal.org/drivers/raster/grib.html">GRIB</a> using .grb file extension</p></li>
<li><p><a class="reference external" href="https://gdal.org/drivers/raster/zarr.html">Zarr</a> using .zarr file extension</p></li>
</ul>
</div></blockquote>
<p>For more information please refer to gdal <a class="reference external" href="https://gdal.org/drivers/raster/index.html">raster driver</a> documentation.</p>
<p>Mosaic provides two flavors of the readers:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">spark.read.format(&quot;gdal&quot;)</span></code> for reading 1 file per spark task</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">mos.read().format(&quot;raster_to_grid&quot;)</span></code> reader that automatically converts raster to grid.</p></li>
</ul>
</div></blockquote>
<section id="spark-read-format-gdal">
<h3>spark.read.format(“gdal”)<a class="headerlink" href="#spark-read-format-gdal" title="Permalink to this heading"></a></h3>
<p>A base Spark SQL data source for reading GDAL raster data sources.
It reads metadata of the raster and exposes the direct paths for the raster files.
The output of the reader is a DataFrame with the following columns:</p>
<blockquote>
<div><ul class="simple">
<li><p>tile - loaded raster tile (RasterTileType)</p></li>
<li><p>ySize - height of the raster in pixels (IntegerType)</p></li>
<li><p>xSize - width of the raster in pixels (IntegerType)</p></li>
<li><p>bandCount - number of bands in the raster (IntegerType)</p></li>
<li><p>metadata - raster metadata (MapType(StringType, StringType))</p></li>
<li><p>subdatasets - raster subdatasets (MapType(StringType, StringType))</p></li>
<li><p>srid - raster spatial reference system identifier (IntegerType)</p></li>
<li><p>proj4Str - raster spatial reference system proj4 string (StringType)</p></li>
</ul>
</div></blockquote>
<dl class="py function">
<dt class="sig sig-object py" id="spark.read.format">
<span class="sig-prename descclassname"><span class="pre">spark.read.</span></span><span class="sig-name descname"><span class="pre">format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">&quot;gdal&quot;).load(path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#spark.read.format" title="Permalink to this definition"></a></dt>
<dd><p>Loads a GDAL raster file and returns the result as a DataFrame.
It uses standard <code class="code docutils literal notranslate"><span class="pre">spark.read.format(*).option(*).load(*)</span></code> pattern.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>Column</em><em>(</em><em>StringType</em><em>)</em>) – path to the raster file on dbfs</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>DataFrame</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p></p></dd>
</dl>
</dd></dl>

<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" role="tablist"><button aria-controls="panel-0-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-0-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-0-U2NhbGE=" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-0-U2NhbGE=" name="U2NhbGE=" role="tab" tabindex="-1">Scala</button></div><div aria-labelledby="tab-0-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" id="panel-0-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;gdal&quot;</span><span class="p">)</span>\
    <span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s2">&quot;driverName&quot;</span><span class="p">,</span> <span class="s2">&quot;GTiff&quot;</span><span class="p">)</span>\
    <span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;dbfs:/path/to/raster.tif&quot;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="o">+---------------------------------------------------------------------------------------------------------------+------+------+----------+---------------------+--------------------+-----+----------------------+</span>
<span class="o">|</span>                                                                                                           <span class="n">tile</span><span class="o">|</span> <span class="n">ySize</span><span class="o">|</span> <span class="n">xSize</span><span class="o">|</span> <span class="n">bandCount</span><span class="o">|</span>             <span class="n">metadata</span><span class="o">|</span>         <span class="n">subdatasets</span><span class="o">|</span> <span class="n">srid</span><span class="o">|</span>              <span class="n">proj4Str</span><span class="o">|</span>
<span class="o">+---------------------------------------------------------------------------------------------------------------+------+------+----------+---------------------+--------------------+-----+----------------------+</span>
<span class="o">|</span> <span class="p">{</span><span class="n">index_id</span><span class="p">:</span> <span class="mi">593308294097928191</span><span class="p">,</span> <span class="n">raster</span><span class="p">:</span> <span class="p">[</span><span class="mi">00</span> <span class="mi">01</span> <span class="mi">10</span> <span class="o">...</span> <span class="mi">00</span><span class="p">],</span> <span class="n">parentPath</span><span class="p">:</span> <span class="s2">&quot;dbfs:/path_to_file&quot;</span><span class="p">,</span> <span class="n">driver</span><span class="p">:</span> <span class="s2">&quot;GTiff&quot;</span> <span class="p">}</span> <span class="o">|</span>  <span class="mi">100</span> <span class="o">|</span>  <span class="mi">100</span> <span class="o">|</span>        <span class="mi">1</span> <span class="o">|</span> <span class="p">{</span><span class="n">AREA_OR_POINT</span><span class="o">=</span><span class="n">Po</span><span class="o">...|</span>                <span class="n">null</span><span class="o">|</span> <span class="mi">4326</span><span class="o">|</span>  <span class="o">+</span><span class="n">proj</span><span class="o">=</span><span class="n">longlat</span> <span class="o">+</span><span class="n">da</span><span class="o">...|</span>
<span class="o">+---------------------------------------------------------------------------------------------------------------+------+------+----------+---------------------+--------------------+-----+----------------------+</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-U2NhbGE=" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-0-U2NhbGE=" name="U2NhbGE=" role="tabpanel" tabindex="0"><div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">spark</span><span class="p">.</span><span class="n">read</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="s">&quot;gdal&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="n">option</span><span class="p">(</span><span class="s">&quot;driverName&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;GTiff&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;dbfs:/path/to/raster.tif&quot;</span><span class="p">)</span>
<span class="n">df</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
<span class="o">+---------------------------------------------------------------------------------------------------------------+------+------+----------+---------------------+--------------------+-----+----------------------+</span>
<span class="o">|</span><span class="w">                                                                                                           </span><span class="n">tile</span><span class="o">|</span><span class="w"> </span><span class="n">ySize</span><span class="o">|</span><span class="w"> </span><span class="n">xSize</span><span class="o">|</span><span class="w"> </span><span class="n">bandCount</span><span class="o">|</span><span class="w">             </span><span class="n">metadata</span><span class="o">|</span><span class="w">         </span><span class="n">subdatasets</span><span class="o">|</span><span class="w"> </span><span class="n">srid</span><span class="o">|</span><span class="w">              </span><span class="n">proj4Str</span><span class="o">|</span>
<span class="o">+---------------------------------------------------------------------------------------------------------------+------+------+----------+---------------------+--------------------+-----+----------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="n">index_id</span><span class="p">:</span><span class="w"> </span><span class="mi">593308294097928191</span><span class="p">,</span><span class="w"> </span><span class="n">raster</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">00</span><span class="w"> </span><span class="mi">01</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="mi">00</span><span class="p">],</span><span class="w"> </span><span class="n">parentPath</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dbfs:/path_to_file&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">driver</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GTiff&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="nc">AREA_OR_POINT</span><span class="o">=</span><span class="nc">Po</span><span class="p">...</span><span class="o">|</span><span class="w">                </span><span class="kc">null</span><span class="o">|</span><span class="w"> </span><span class="mi">4326</span><span class="o">|</span><span class="w">  </span><span class="o">+</span><span class="n">proj</span><span class="o">=</span><span class="n">longlat</span><span class="w"> </span><span class="o">+</span><span class="n">da</span><span class="p">...</span><span class="o">|</span>
<span class="o">+---------------------------------------------------------------------------------------------------------------+------+------+----------+---------------------+--------------------+-----+----------------------+</span>
</pre></div>
</div>
</div></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Keyword options not identified in function signature are converted to a <code class="code docutils literal notranslate"><span class="pre">Map&lt;String,String&gt;</span></code>.
These must be supplied as a <code class="code docutils literal notranslate"><span class="pre">String</span></code>.
Also, you can supply function signature values as <code class="code docutils literal notranslate"><span class="pre">String</span></code>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Issue 350: <a class="reference external" href="https://github.com/databrickslabs/mosaic/issues/350">https://github.com/databrickslabs/mosaic/issues/350</a>
The raster reader ‘driverName’ option has to match the names provided in the above list.
For example, if you want to read a GeoTiff file, you have to use the following option:
.option(“driverName”, “GTiff”) instead of .option(“driverName”, “tif”).</p>
</div>
</section>
<section id="mos-read-format-raster-to-grid">
<h3>mos.read().format(“raster_to_grid”)<a class="headerlink" href="#mos-read-format-raster-to-grid" title="Permalink to this heading"></a></h3>
<p>Reads a GDAL raster file and converts it to a grid.</p>
<p>It uses a pattern similar to standard spark.read.format(*).option(*).load(*) pattern.
The only difference is that it uses <code class="code docutils literal notranslate"><span class="pre">mos.read()</span></code> instead of <code class="code docutils literal notranslate"><span class="pre">spark.read()</span></code>.</p>
<p>The raster pixels are converted to grid cells using specified combiner operation (default is mean).
If the raster pixels are larger than the grid cells, the cell values can be calculated using interpolation.
The interpolation method used is Inverse Distance Weighting (IDW) where the distance function is a k_ring
distance of the grid.</p>
<p>Rasters can be transformed into different formats as part of this process in order to overcome problems with bands
being translated into subdatasets by some GDAL operations. Our recommendation is to specify <code class="code docutils literal notranslate"><span class="pre">GTiff</span></code> if you run into problems here.</p>
<p>Raster checkpointing should be enabled to avoid memory issues when working with large rasters. See <a class="reference internal" href="../usage/raster-checkpointing.html"><span class="doc">Checkpointing</span></a> for more information.</p>
<p>The reader supports the following options:</p>
<blockquote>
<div><ul class="simple">
<li><p>fileExtension - file extension of the raster file (StringType) - default is <em>.</em></p></li>
<li><p>vsizip - if the rasters are zipped files, set this to true (BooleanType)</p></li>
<li><p>resolution - resolution of the output grid (IntegerType)</p></li>
<li><p>sizeInMB - size of subdivided rasters in MB. Must be supplied, must be a positive integer (IntegerType)</p></li>
<li><p>convertToFormat - convert the raster to a different format (StringType)</p></li>
<li><p>combiner - combiner operation to use when converting raster to grid (StringType) - default is mean</p></li>
<li><p>retile - if the rasters are too large they can be re-tiled to smaller tiles (BooleanType)</p></li>
<li><p>tileSize - size of the re-tiled tiles, tiles are always squares of tileSize x tileSize (IntegerType)</p></li>
<li><p>readSubdatasets - if the raster has subdatasets set this to true (BooleanType)</p></li>
<li><p>subdatasetNumber - if the raster has subdatasets, select a specific subdataset by index (IntegerType)</p></li>
<li><p>subdatasetName - if the raster has subdatasets, select a specific subdataset by name (StringType)</p></li>
<li><p>kRingInterpolate - if the raster pixels are larger than the grid cells, use k_ring interpolation with n = kRingInterpolate (IntegerType)</p></li>
</ul>
</div></blockquote>
<dl class="py function">
<dt class="sig sig-object py" id="mos.read">
<span class="sig-prename descclassname"><span class="pre">mos.</span></span><span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">).format(&quot;raster_to_grid&quot;).load(path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mos.read" title="Permalink to this definition"></a></dt>
<dd><p>Loads a GDAL raster file and returns the result as a DataFrame.
It uses standard <code class="code docutils literal notranslate"><span class="pre">mos.read().format(*).option(*).load(*)</span></code> pattern.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>Column</em><em>(</em><em>StringType</em><em>)</em>) – path to the raster file on dbfs</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>DataFrame</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p></p></dd>
</dl>
</dd></dl>

<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" role="tablist"><button aria-controls="panel-1-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-1-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-1-U2NhbGE=" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-1-U2NhbGE=" name="U2NhbGE=" role="tab" tabindex="-1">Scala</button></div><div aria-labelledby="tab-1-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" id="panel-1-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">mos</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;raster_to_grid&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s2">&quot;sizeInMB&quot;</span><span class="p">,</span> <span class="s2">&quot;16&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s2">&quot;convertToFormat&quot;</span><span class="p">,</span> <span class="s2">&quot;GTiff&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s2">&quot;resolution&quot;</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s2">&quot;readSubdataset&quot;</span><span class="p">,</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s2">&quot;subdatasetName&quot;</span><span class="p">,</span> <span class="s2">&quot;t2m&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s2">&quot;retile&quot;</span><span class="p">,</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s2">&quot;tileSize&quot;</span><span class="p">,</span> <span class="s2">&quot;600&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s2">&quot;combiner&quot;</span><span class="p">,</span> <span class="s2">&quot;avg&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;dbfs:/path/to/raster.tif&quot;</span><span class="p">)</span>
    <span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="o">+--------+--------+------------------+</span>
<span class="o">|</span><span class="n">band_id</span> <span class="o">|</span><span class="n">cell_id</span> <span class="o">|</span><span class="n">cell_value</span>        <span class="o">|</span>
<span class="o">+--------+--------+------------------+</span>
<span class="o">|</span>       <span class="mi">1</span><span class="o">|</span>       <span class="mi">1</span><span class="o">|</span><span class="mf">0.1400000000000000</span><span class="o">|</span>
<span class="o">|</span>       <span class="mi">1</span><span class="o">|</span>       <span class="mi">2</span><span class="o">|</span><span class="mf">0.1400000000000000</span><span class="o">|</span>
<span class="o">|</span>       <span class="mi">1</span><span class="o">|</span>       <span class="mi">3</span><span class="o">|</span><span class="mf">0.2464000000000000</span><span class="o">|</span>
<span class="o">|</span>       <span class="mi">1</span><span class="o">|</span>       <span class="mi">4</span><span class="o">|</span><span class="mf">0.2464000000000000</span><span class="o">|</span>
<span class="o">+--------+--------+------------------+</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-U2NhbGE=" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-1-U2NhbGE=" name="U2NhbGE=" role="tabpanel" tabindex="0"><div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">MosaicContext</span><span class="p">.</span><span class="n">read</span>
<span class="w">     </span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="s">&quot;raster_to_grid&quot;</span><span class="p">)</span>
<span class="w">     </span><span class="p">.</span><span class="n">option</span><span class="p">(</span><span class="s">&quot;sizeInMB&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;16&quot;</span><span class="p">)</span>
<span class="w">     </span><span class="p">.</span><span class="n">option</span><span class="p">(</span><span class="s">&quot;convertToFormat&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;GTiff&quot;</span><span class="p">)</span>
<span class="w">     </span><span class="p">.</span><span class="n">option</span><span class="p">(</span><span class="s">&quot;resolution&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;0&quot;</span><span class="p">)</span>
<span class="w">     </span><span class="p">.</span><span class="n">option</span><span class="p">(</span><span class="s">&quot;readSubdataset&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="p">)</span>
<span class="w">     </span><span class="p">.</span><span class="n">option</span><span class="p">(</span><span class="s">&quot;subdatasetName&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;t2m&quot;</span><span class="p">)</span>
<span class="w">     </span><span class="p">.</span><span class="n">option</span><span class="p">(</span><span class="s">&quot;retile&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="p">)</span>
<span class="w">     </span><span class="p">.</span><span class="n">option</span><span class="p">(</span><span class="s">&quot;tileSize&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;600&quot;</span><span class="p">)</span>
<span class="w">     </span><span class="p">.</span><span class="n">option</span><span class="p">(</span><span class="s">&quot;combiner&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;avg&quot;</span><span class="p">)</span>
<span class="w">     </span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;dbfs:/path/to/raster.tif&quot;</span><span class="p">)</span>
<span class="n">df</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
<span class="o">+--------+--------+------------------+</span>
<span class="o">|</span><span class="n">band_id</span><span class="w"> </span><span class="o">|</span><span class="n">cell_id</span><span class="w"> </span><span class="o">|</span><span class="n">cell_value</span><span class="w">        </span><span class="o">|</span>
<span class="o">+--------+--------+------------------+</span>
<span class="o">|</span><span class="w">       </span><span class="mi">1</span><span class="o">|</span><span class="w">       </span><span class="mi">1</span><span class="o">|</span><span class="mf">0.1400000000000000</span><span class="o">|</span>
<span class="o">|</span><span class="w">       </span><span class="mi">1</span><span class="o">|</span><span class="w">       </span><span class="mi">2</span><span class="o">|</span><span class="mf">0.1400000000000000</span><span class="o">|</span>
<span class="o">|</span><span class="w">       </span><span class="mi">1</span><span class="o">|</span><span class="w">       </span><span class="mi">3</span><span class="o">|</span><span class="mf">0.2464000000000000</span><span class="o">|</span>
<span class="o">|</span><span class="w">       </span><span class="mi">1</span><span class="o">|</span><span class="w">       </span><span class="mi">4</span><span class="o">|</span><span class="mf">0.2464000000000000</span><span class="o">|</span>
<span class="o">+--------+--------+------------------+</span>
</pre></div>
</div>
</div></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Keyword options not identified in function signature are converted to a <code class="code docutils literal notranslate"><span class="pre">Map&lt;String,String&gt;</span></code>.
These must be supplied as a <code class="code docutils literal notranslate"><span class="pre">String</span></code>.
Also, you can supply function signature values as <code class="code docutils literal notranslate"><span class="pre">String</span></code>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Issue 350: <a class="reference external" href="https://github.com/databrickslabs/mosaic/issues/350">https://github.com/databrickslabs/mosaic/issues/350</a>
The option ‘fileExtension’ expects a wild card mask. Please use the following format: ‘<a href="#id1"><span class="problematic" id="id2">*</span></a>.tif’ or equivalent for other formats.
If you use ‘tif’ without the wildcard the reader wont pick up any files and you will have empty table as a result.</p>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="vector-format-readers.html" class="btn btn-neutral float-left" title="Vector Format Readers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="geometry-constructors.html" class="btn btn-neutral float-right" title="Geometry constructors" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Databricks Inc.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>